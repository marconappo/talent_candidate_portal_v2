<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[function hriContactsController($scope, spUtil, $location) {

    $scope.$on('data_table.click', function(e, parms) {
        var s = {
            id: 'hri_contact_form',
            table: parms.table,
            sys_id: parms.sys_id,
            view: 'sp'
        };
        $location.search(s);
    });
    /*function to make buttons & tags, spacebar & enter key pressable.*/
    $scope.handleKeyBoardEvent = function(event) {
        if (event.keyCode === 32 || event.keyCode === 13) {
            event.preventDefault();
            event.target.click();
        }
    };
    $scope.isMobile = function() {
        return (window.innerWidth <= 767);
    };
}]]></client_script>
        <controller_as>c</controller_as>
        <css>$sp-space--xl : 24px !default;
$sp-space--lg : 16px !default;
.my-contact-panel {
  background: white;
  box-shadow: 0px 4px 8px rgba(23, 40, 52, 0.08);
  border-radius: 8px;
  padding: 0px $sp-space--xl;
}
.mycontact-panel-header-mobile{
  padding: $sp-space--xl $sp-space--lg;
}

.mycontact-panel-header{
  padding: $sp-space--xl;
}

.seprator {
  margin: 0px;
}


//removes scroll bar at 400% zoom in 1280x1080 screen size
	@media screen and (max-width: 360px){
	  .table &gt; thead &gt; tr &gt; th,
	    .table &gt; thead &gt; tr &gt; td,
	    .table &gt; tbody &gt; tr &gt; th,
	    .table &gt; tbody &gt; tr &gt; td,
	    .table &gt; tfoot &gt; tr &gt; th,
	    .table &gt; tfoot &gt; tr &gt; td {
	      padding: 1px;
	      white-space: normal;
	    }
  }</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>related_record_talent</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>Related Record Talent</name>
        <option_schema>[{"name":"table","section":"Data","label":"table","type":"string"}]</option_schema>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
    var user_id = $sp.getParameter("sys_id") || gs.getUserID();
    var candidateGR = new GlideRecord("x_431105_cand_ass_candidate");
    candidateGR.addEncodedQuery("candidate="+user_id); 
    candidateGR.query()
    candidateGR.next()
	data.title = options.title || gs.getMessage('My Contacts'); 
	data.content = options;
    var p = {
        table: options.table,
        fields: options.fields,
        filter: options.filter + candidateGR.sys_id.toString(),
        hide_header: true,
        hide_footer: true,
        show_new: true
    };

    //data.url = "?id=form&table=x_431105_cand_ass_candidate_education_experience&sys_id=-1&view=candidate&candidate="+ candidateGR.sys_id.toString();
    data.url = options.createURL+ candidateGR.sys_id.toString()
		data.list = $sp.getWidget('widget-data-table', p);

    var gr = new GlideRecord(p.table);
    gr.addQuery(p.filter);
    gr.query();

    data.hasRecordsToShow = gr.getRowCount() > 0;

    gr.initialize();
    gr.user = user_id;
    data.canAddContact = gr.canCreate() && gr.canWrite();

    data.publicProfileWidget = $sp.getWidget('public_profile_visibility', {
        'tabWidgetMappingId': data.content ? data.content.tabWidgetMappingId : '',
        'isUserSelectionEnabled': data.content ? data.content.isUserSelectionEnabled : '',
        'widgetTitle': data.content ? data.content.widgetTitle : ''
    });

})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>olivier.gregoire</sys_created_by>
        <sys_created_on>2023-05-31 07:43:06</sys_created_on>
        <sys_id>e4c8f943478725103fa44aff336d43c0</sys_id>
        <sys_mod_count>18</sys_mod_count>
        <sys_name>Related Record Talent</sys_name>
        <sys_package display_value="Talent NOW" source="x_431105_cand_ass">3aeff01497c02110a4deb9dfe153afb4</sys_package>
        <sys_policy/>
        <sys_scope display_value="Talent NOW">3aeff01497c02110a4deb9dfe153afb4</sys_scope>
        <sys_update_name>sp_widget_e4c8f943478725103fa44aff336d43c0</sys_update_name>
        <sys_updated_by>olivier.gregoire</sys_updated_by>
        <sys_updated_on>2023-06-01 15:51:04</sys_updated_on>
        <template><![CDATA[<div id="my-contact-panel" class="panel panel-default b" ng-if="data.hasRecordsToShow || data.canAddContact">
  <div ng-class="{true: 'mycontact-panel-header-mobile', false: 'mycontact-panel-header'}[isMobile()]">
    <h2 class="h4 panel-title ng-binding">
      <div>{{data.title}}</div>
    </h2>
    <div>
      <sp-widget widget="data.publicProfileWidget"></sp-widget>
    </div>
  </div>
  <hr class="seprator" aria-hidden="true">
  <div class="panel-body">
    <div ng-if="data.hasRecordsToShow">
      <sp-widget widget="data.list" />
    </div>
    <a ng-if="data.canAddContact" id="new_contact" href="{{data.url}}" ng-keypress="handleKeyBoardEvent($event)">
      <span> ${Add new {{data.title}}} </span>
    </a>
  </div>]]></template>
    </sp_widget>
</record_update>
